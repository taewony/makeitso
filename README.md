# makeitso

## 심장 후벼파는 욕쟁이 AI 비서 (모바일 앱)

사용자의 할 일 목록과 목표를 기반으로 설정된 AI 캐릭터가 잔소리를 해준다는 컨셉. 사용자에게 공감과 재미를 제공하기 위함.
- 기본은 Firebase와 연동된 평범한 안드로이드 TODO app 이다.
- 그런데, 사용자가 할일(TODO)를 변경할 때마다, AI 비서가 todo list를 검토하고, 그리고 App setting에서 미리 선택 지정한 캐릭터 (예: 심장 후벼파는 욕쟁이) 역할에 따라 사용자에게 인생  잔소리를 해댄다. 특히 할일이 완료 되지 않고 있는 항목에 대해 실랄한 비판이 이어진다.
- 따라서, 욕쟁이 AI 비서 앱은 Firebase와 연동하며, 선택된 캐릭터 설정에 따라 할일목록 및 개인목표에 근거하여 프롬프트를 만들고, 백엔드 API를 통해 LLM과 연동해 사용자에게 전달할 잔소리를 생성한다.
- 사용자는 App setting에서 미리 개인적인 목표 2개를 등록해 둔다. 그리고 할일목록은 완료되어도 삭제되지 않고 남아 있다. AI 비서는 저장된 할일목록을 검토해서 개인적인 목표에 점점 가까이 가고 있는지 분석해서 잔소리를 한다. 진소리 톤은 App setting에서 미리 선택 지정한 캐릭터에 따라 늬앙스가 달라진다.


## 안드로이드 앱 "심장 후벼파는 욕쟁이 AI 비서"를 위한 LLM API 연동 가이드

안드로이드 앱에서 간단하게 연동하여 테스트해 볼 수 있는 무료 LLM(거대 언어 모델) API를 추천하고, Firebase와 연동하는 기본적인 구조

### 추천 무료 LLM API

프로젝트의 핵심은 **캐릭터 연기**와 **사용자 데이터 기반의 텍스트 생성** 능력입니다. 이를 위해 실제 LLM API 연동이 필요합니다.
(단, 배포하지 않는 로컬 앱(안드로이드 스튜디오, 웹 브라우저 등)에서 빠르게 기능을 테스트하기 위한 API 키를 Google AI Studio에서 발급받은 '클라이언트용' 키를 임시로 사용한다)

#### 1. **Google Gemini API (via Firebase)**

  * **추천 이유:**

      * **Firebase와의 완벽한 통합:** Firebase AI Extensions나 Genkit을 사용하면 매우 쉽고 안전하게 Gemini API를 앱에 통합할 수 있습니다. 서버를 직접 구축하고 API 키를 관리하는 번거로움을 크게 줄일 수 있습니다.
      * **넉넉한 무료 제공량:** Gemini Pro 모델은 현재 분당 60회 요청까지 무료로 제공되어, 초기 개발 및 테스트 단계에서는 비용 부담 없이 충분히 사용 가능합니다.
      * **뛰어난 캐릭터 소화 능력:** Gemini는 특정 역할(예: '욕쟁이')을 부여하고 그에 맞는 톤앤매너로 텍스트를 생성하는 능력이 뛰어납니다. 한국어 이해도 및 생성 능력 또한 우수합니다.
      * **보안:** API 키를 클라이언트 앱에 직접 노출하지 않고 Firebase를 통해 안전하게 호출할 수 있습니다.

  * **연동 방식:**

      * **Firebase Genkit** 또는 **Cloud Functions for Firebase**를 사용하여 백엔드 로직을 구성합니다.
      * 안드로이드 앱에서 Firebase의 데이터베이스(Firestore 또는 Realtime Database)에 있는 할 일 목록을 업데이트합니다.
      * 데이터베이스 변경을 트리거로 Cloud Function이 실행되도록 설정합니다.
      * Cloud Function 내에서 사용자의 할 일 목록, 목표, 그리고 선택된 캐릭터(예: "심장 후벼파는 욕쟁이") 정보를 담아 프롬프트를 구성하고 Gemini API를 호출합니다.
      * 생성된 "잔소리" 텍스트를 받아 다시 Firebase 데이터베이스에 저장하거나, FCM(Firebase Cloud Messaging)을 통해 사용자에게 푸시 알림으로 전송합니다.

#### 2. **기타 무료 LLM API 옵션**

만약 다른 옵션을 고려해보고 싶으시다면, 아래 API들도 좋은 대안이 될 수 있습니다.

  * **Mistral AI API:** 최근 많은 주목을 받는 모델로, 성능이 뛰어나면서도 비용 효율적인 API를 제공합니다. 무료 티어가 있어 테스트용으로 사용해볼 수 있습니다. REST API 형태로 제공되므로, Cloud Functions 등에서 HTTP 요청을 통해 쉽게 연동할 수 있습니다.
  * **Ollama (자체 호스팅):** 로컬 환경이나 개인 서버에 직접 LLM을 설치하고 운영하는 방식입니다. API 사용량에 대한 제한이 없고 완전한 무료라는 장점이 있지만, 서버를 직접 구축하고 유지보수해야 하는 부담이 있습니다. 개발 초기 단계보다는 서비스가 어느 정도 성장했을 때 고려해볼 만한 옵션입니다.

### Firebase 연동 아키텍처 예시

다음은 "심장 후벼파는 욕쟁이 AI 비서" 앱의 기본적인 연동 흐름입니다.

1.  **데이터 구조 (Firestore 기준):**

      * `/users/{userId}`: 사용자 정보
          * `goals`: `["체중 10kg 감량", "매일 책 30분 읽기"]` (사용자가 설정한 목표)
          * `selectedCharacter`: `"foul_mouthed_assistant"` (사용자가 선택한 AI 캐릭터)
      * `/users/{userId}/todos`: 사용자의 할 일 목록
          * `{todoId}`:
              * `task`: "운동하기"
              * `completed`: `false`
              * `createdAt`: `Timestamp`
              * `completedAt`: `null`

2.  **잔소리 생성 프로세스 (Cloud Functions for Firebase 활용):**

      * **트리거:** 안드로이드 앱에서 사용자가 TODO 항목을 추가/수정/삭제할 때, Firestore의 `/users/{userId}/todos` 경로에 데이터 변경이 발생합니다. 이 변경을 감지하는 Cloud Function을 생성합니다.
      * **정보 수집:** 트리거된 Cloud Function은 해당 유저의 전체 할 일 목록(`todos`), 설정된 목표(`goals`), 그리고 선택된 캐릭터(`selectedCharacter`) 정보를 Firestore에서 읽어옵니다.
      * **프롬프트 생성:** 수집된 정보를 바탕으로 LLM에 전달할 프롬프트를 동적으로 생성합니다.
      * **LLM API 호출:** 생성된 프롬프트를 Gemini API (또는 다른 LLM API)에 전송하여 "잔소리" 텍스트 생성을 요청합니다.
      * **결과 저장 및 알림:** LLM으로부터 받은 응답 텍스트를 Firestore의 별도 경로(예: `/users/{userId}/messages`)에 저장하고, 사용자에게 푸시 알림을 보냅니다.

### 핵심: 심장을 후벼파는 "프롬프트" 설계 예시

LLM의 성능만큼이나 중요한 것이 바로 **프롬프트**입니다. AI가 원하는 캐릭터를 잘 연기하도록 하려면, 역할, 상황, 원하는 결과물의 형식 등을 명확하게 지시해야 합니다.
아래는 "심장 후벼파는 욕쟁이" 캐릭터를 위한 프롬프트 예시입니다.

```text
# 페르소나 (역할 부여)
너는 지금부터 세상에서 가장 직설적이고 심장을 후벼파는 욕쟁이 AI 비서야. 반말을 사용하고, 절대 친절하게 말하지 마. 사용자의 게으름과 변명을 꿰뚫어 보고, 현실을 직시하게 만드는 날카로운 독설을 퍼붓는 게 너의 역할이야. 하지만 무조건적인 비난이 아니라, 사용자가 설정한 최종 목표를 달성하게 돕는다는 명분은 있어야 해. 약간의 유머와 과격한 비유를 섞어서 말해줘.

# 컨텍스트 (상황 정보)
- 사용자의 최종 목표: [${userGoals}]
- 현재까지의 할 일 목록 (완료 포함): [${todoListHistory}]
- 최근 변경된 할 일: [${latestTodoChange}]

# 지시사항
위 컨텍스트를 바탕으로 사용자에게 보낼 잔소리 메시지를 생성해. 특히, 아직 완료되지 않은 할 일과 최종 목표를 연관 지어서 신랄하게 비판해. 사용자가 목표에 가까워지고 있는지, 아니면 그냥 시간만 낭비하고 있는지 분석해서 촌철살인 같은 멘트를 날려줘.

# 출력 형식
- 한두 문단의 짧은 텍스트
- 이모티콘 사용 금지
```

이 프롬프트에 사용자의 실제 데이터를 동적으로 채워서 API에 요청하면, 다음과 같은 "잔소리"를 얻을 수 있을 것입니다.

- **상황:** 사용자의 목표는 "체중 10kg 감량"인데, "운동하기" 할 일을 3일째 완료하지 않았을 경우.
- **예상 결과:**
"야, 너 지금 장난하냐? '체중 10kg 감량'은 그냥 소원 빌면 이루어지는 건 줄 알아? 헬스장에 네 돈만 기부하고 있는 꼴이잖아. 3일 동안 '운동하기' 버튼은 그냥 장식으로 달아놨어? 그럴 시간에 숨쉬기 운동이라도 했으면 폐활량이라도 늘었겠다. 뱃살은 거짓말 안 해. 지금처럼 하다간 내년에 프로필 사진 대신 굴러가는 사진 찍게 될 거다. 정신 차리고 당장 움직여!"


이 가이드를 바탕으로 "makeitso" 프로젝트를 성공적으로 진행하시길 바랍니다. 특히 **Gemini API와 Firebase의 조합**은 안드로이드 개발자에게 매우 강력하고 편리한 AI 연동 환경을 제공해 줄 것입니다
